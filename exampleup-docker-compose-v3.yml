version: '3'
services:
  log:
    image: markwatsonatx/exampleup-log:latest
    volumes:
      - ./:/dc
      - /var/run/docker.sock:/var/run/docker.sock
    environment:
      - EXUP_DIR=/dc
      - EXUP_ALLOW_ORIGIN=${EXUP_ALLOW_ORIGIN}
    ports:
      - "${EXUP_LOG_PORT}:8080"
  editor:
    image: markwatsonatx/exampleup-editor:latest
    volumes:
      - ./:/dc
    environment:
      - EXUP_DIR=/dc
      - EXUP_ALLOW_ORIGIN=${EXUP_ALLOW_ORIGIN}
    ports:
      - "${EXUP_EDITOR_PORT}:80"
  proxy:
    image: markwatsonatx/exampleup-proxy:latest
    environment:
      - EXUP_TARGET_HOST=dind
      - EXUP_ALLOW_ORIGIN=${EXUP_ALLOW_ORIGIN}
    extra_hosts:
      - "dind:${DIND_IP_ADDRESS}"
    ports:
      - "${EXUP_PROXY_PORT}:80"